<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1251">

</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<H1><A NAME="idh_regexp"></A>Perl-совместимые регулярные выражения</H1>

<P>Радиус использует библиотеку Perl-Compatible Regular Expressions v3.3 (c) 1997-2001 University of Cambridge, которая является программным обеспечением с открытыми исходными текстами. Библиотеку PCRE написал Philip Hazel &lt;ph10@cam.ac.uk&gt;, University Computing Service, New Museums Site, Cambridge CB2 3QG, England, Phone: +44 1223 334714.</P>

<P>Perl-совместимые регулярные выражения (Perl-Compatible Regular Expressions, PCRE) описаны в <A HREF="regexpadvanced.html">отдельной главе</A>, которую составил Philip Hazel.</P>

<H2>Где использовать регулярные выражения</H2>

<P>Регулярные выражения могут использоваться в файловых масках,
    масках адресов, ответах модемов, конфигурации файл-боксов, то есть 
    везде, где можно использовать обычные маски (хотя ответы модемов
    не допускают использование обычных масок)</P>

<H2>Синтаксис</H2>

<P>    Чтобы вставить регулярное выражение, используйте символ '~', после 
    которого следует символ-разделитель, определяющий начало и конец 
    регулярного выражения.</P>

<P>    например</P>

<P>    до~#РегулярноеВыражение#после</P>

<P>    где "до" и "после" это опциональный текст, который расценивается 
    как обычная маска (то символ соответствует самому себе, '?' 
    соответсвует любому символу, '*' соответсвует последовательности 
    символов.</P>
    
<P>    "РегулярноеВыражение" - текст регулярного выражения.</P>
    
<P>    '#' - символ-разделитель.</P>

<H2>Примеры</H2>

<P>    Файловая маска</P>

<P>    ~#cat(aract|erpillar|)\..+#</P>

<P>    будет подходить файлам с именами "cat", "cataract", or "caterpillar", с 
    обязательным любым расширением.</P>

<P>    иногда это можно заменить на</P>

<P>    ~#cat(aract|erpillar|)#.*</P>

<P>    здесь, после разделителя, текст (".*") трактуется как обычная маска, то 
    есть '.' соответствует точке, а '*' соответствует последовательности 
    символов.</P>
   
<P>    Пример использования регулярных выражений в ответах модемов:</P>

<P>    ~#^RING(\x20\d)?$#</P>

<P>Это выражение соответствует строке "RING" с необязательной следующей за ней комбинацией из пробела и цифры.</P>

<H2>Разделители в строках и разделители регулярного выражения</H2>

<P>    Из-за того, что пробел (или другой символ) может использоваться как 
    разделитель в строках конфигурации, такой символ не должен встречаться
    в оригинальном виде. Разделитель в строках конфигурации (пробел) имеет 
    больший приоритет, чем разделитель регулярного выражения (например #).</P>

<P>    Чтобы в регулярных выражениях избежать  использования разделителя, 
    применяемого в строках конфигурации, используйте шестнадцатеричный код
    (например, \x20 для пробела) или соответствующий шаблон (например, \s)</P>

<P>    Если символ '#' планируется использовать в регулярном выражении,
    вы можете также прибегнуть к шестнадцатеричному коду, но лучше 
    подобрать другой символ на роль разделителя.</P>

<P>    ~`^RING(\x20#\d)?$`</P>

<P>    Для того чтобы использовать символ '~' в обычной маске, удвойте его.</P>

<H2>Привязка в файловых масках</H2>

<P>    Вам не нужно "привязывать" регулярное выражение (используя символы '^' и '$') 
    в файловых масках - они бут "привязаны" автоматически, а если надо 
    пропустить символы с начала или с конца, используйте ".*" </P>

<H2>PCRE Default Options</H2>

<P>The settings of PCRE_CASELESS, PCRE_MULTILINE, PCRE_DOTALL, and PCRE_EXTENDED options (described in <A HREF="regexpadvanced.html">separate chapter</A>) can be changed from within the pattern by a sequence of Perl option letters enclosed between "(?" and ")", although the following default options are used:</P>

<P>When matching file names and path names - PCRE_CASELESS.</P>

<P>When matching modem responses - PCRE_MULTILINE, because the regular expression is matching against the entire multi-line input data stream coming from a modem.</P>

<P>In all other cases none of PCRE options are set by default.</P>

</BODY>
</HTML>
